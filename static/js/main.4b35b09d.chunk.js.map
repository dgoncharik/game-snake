{"version":3,"sources":["Components/Cell.jsx","assets/img/food/cherry.png","utils/getRandomInt.js","Components/Field.jsx","App.js","index.js"],"names":["Cell","row","col","area","isFood","snakeHead","snake","style","width","height","data-row","data-col","className","classNames","src","getRandomInt","min","max","Math","ceil","floor","random","DIRECTION","Field","cellArea","numberRows","numberColumns","getRandomCell","cells","length","React","useState","_","console","log","push","generateCells","direction","setDirection","setSnake","food","setFood","step","setStep","refDirection","useRef","current","refInterval","onKeyDown","evt","some","key","code","preventDefault","snakeStep","newHeadPosition","Error","newSnake","pop","useEffect","window","addEventListener","setInterval","clearInterval","removeEventListener","tailCollision","slice","el","snakeAteFood","snakeIsOutColumns","snakeIsOutRows","alert","map","cell","find","tail","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4b35b09d.chunk.js","sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport cherry from \"../assets/img/food/cherry.png\";\r\n\r\nfunction Cell({row, col, area, isFood, snakeHead, snake}) {\r\n  return (\r\n      <div\r\n          style={{width: area + \"px\", height: area + \"px\"}}\r\n          data-row={row} // удалить, для дебага\r\n          data-col={col} // удалить, для дебага\r\n          className={classNames(\"cell\", {\r\n            \"snakeHead\": snakeHead,\r\n            \"snake\": snake\r\n          })}\r\n      >\r\n        {isFood && <img src={cherry}/>}\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Cell;","export default \"data:image/png;base64,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\"","function getRandomInt(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min)) + min; //Максимум не включается, минимум включается\r\n}\r\n\r\nexport default getRandomInt;","import React from \"react\";\r\nimport Cell from \"./Cell\";\r\nimport getRandomInt from \"../utils/getRandomInt\";\r\n\r\nconst DIRECTION = {\r\n  RIGHT: \"RIGHT\",\r\n  UP: \"UP\",\r\n  LEFT: \"LEFT\",\r\n  DOWN: \"DOWN\",\r\n}\r\n\r\n\r\n\r\nconst generateCells = ((numberRows, numberColumns) => {\r\n  console.log(\"generate Cells\")\r\n  const cells = [];\r\n\r\n  for (let row=1; row < numberRows + 1; row++) {\r\n    for (let col=1; col < numberColumns + 1; col++) {\r\n      cells.push({row, col})\r\n    }\r\n  }\r\n  return cells;\r\n})\r\n\r\n\r\nfunction Field({width, height, cellArea}) {\r\n  const numberRows = Math.floor(height / cellArea);\r\n  const numberColumns = Math.floor(width / cellArea);\r\n\r\n  const getRandomCell = () => ({...cells[getRandomInt(0, cells.length)]});\r\n\r\n  const [cells, setCells] = React.useState(_ => generateCells(numberRows, numberColumns)); // [{row:1, col:1}, {row:1, col:2}...]\r\n  const [direction, setDirection] = React.useState(DIRECTION.RIGHT);\r\n  const [snake, setSnake] = React.useState([{row:1, col:2}, {row:1, col:1}]);\r\n  const [food, setFood] = React.useState(getRandomCell);\r\n  const [step, setStep] = React.useState(0);\r\n\r\n  const refDirection = React.useRef(direction);\r\n  refDirection.current = direction;\r\n\r\n  const refInterval = React.useRef(null);\r\n\r\n  const onKeyDown = (evt) => {\r\n    const controlButtonPressed = [\"ArrowRight\", \"ArrowLeft\", \"ArrowUp\", \"ArrowDown\"].some(key => key === evt.code);\r\n    if (controlButtonPressed) {\r\n      evt.preventDefault();\r\n\r\n      if (evt.code === \"ArrowRight\" && refDirection.current !== DIRECTION.LEFT) {\r\n        setDirection(DIRECTION.RIGHT)\r\n      } else if (evt.code === \"ArrowLeft\" && refDirection.current !== DIRECTION.RIGHT) {\r\n        setDirection(DIRECTION.LEFT)\r\n      } else if (evt.code === \"ArrowUp\" && refDirection.current !== DIRECTION.DOWN) {\r\n        setDirection(DIRECTION.UP)\r\n      } else if (evt.code === \"ArrowDown\" && refDirection.current !== DIRECTION.UP) {\r\n        setDirection(DIRECTION.DOWN)\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  const snakeStep = () => {\r\n    setSnake(snake => {\r\n\r\n      let newHeadPosition = null;\r\n\r\n      switch (refDirection.current) {\r\n        case (DIRECTION.RIGHT):\r\n          newHeadPosition = {...snake[0], col: snake[0].col+1};\r\n          break;\r\n        case(DIRECTION.LEFT):\r\n          newHeadPosition = {...snake[0], col: snake[0].col-1};\r\n          break\r\n        case(DIRECTION.UP):\r\n          newHeadPosition = {...snake[0], row: snake[0].row-1};\r\n          break;\r\n        case(DIRECTION.DOWN):\r\n          newHeadPosition = {...snake[0], row: snake[0].row+1};\r\n          break;\r\n        default:\r\n          throw Error(`Direction error! Direction can't be \"${refDirection.current}\"`);\r\n      }\r\n\r\n      let newSnake = snake;\r\n      if (newHeadPosition) {\r\n        newSnake = [newHeadPosition, ...snake];\r\n        newSnake.pop()\r\n      }\r\n\r\n      return newSnake;\r\n    })\r\n\r\n    setStep(step => step+1);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n\r\n    window.addEventListener(\"keydown\", onKeyDown);\r\n    refInterval.current = setInterval(snakeStep, 300);\r\n\r\n    return () => {\r\n      clearInterval(refInterval.current);\r\n      window.removeEventListener(\"keydown\", onKeyDown);\r\n    }\r\n\r\n  }, [])\r\n\r\n\r\n  React.useEffect(() => {\r\n\r\n    const snakeHead = snake[0];\r\n    const snakeTail = snake.slice(1);\r\n    const tailCollision = snakeTail.some(el => el.row === snakeHead.row && el.col === snakeHead.col);\r\n    const snakeAteFood = snakeHead.row === food.row && snakeHead.col === food.col;\r\n    const snakeIsOutColumns = snakeHead.col < 1 || snakeHead.col > numberColumns;\r\n    const snakeIsOutRows    = snakeHead.row < 1 || snakeHead.row > numberRows;\r\n\r\n    if (tailCollision) {\r\n      clearInterval(refInterval.current);\r\n      alert(\"Столкновение с хвостом\")\r\n    }\r\n\r\n    if (snakeAteFood) {\r\n      setSnake(snake => [...snake, {row:snakeHead.row, col:snakeHead.col}])\r\n      setFood(getRandomCell());\r\n    }\r\n\r\n    if (snakeIsOutColumns || snakeIsOutRows) {\r\n\r\n      setSnake(snake => {\r\n        const newSnake = [...snake];\r\n\r\n        if (snakeIsOutColumns) {\r\n          newSnake[0].col = snakeHead.col < 1 ? numberColumns : 1;\r\n        } else {\r\n          newSnake[0].row = snakeHead.row < 1 ? numberRows : 1;\r\n        }\r\n\r\n        return newSnake;\r\n      })\r\n      setStep(step => step+1);\r\n    }\r\n\r\n  }, [step])\r\n\r\n  return (\r\n      cells.length > 0 &&\r\n      <div className=\"field\" style={{width: width + \"px\", height: height + \"px\"}}>\r\n        {\r\n          cells.map(cell => (\r\n              <Cell\r\n                  key={`${cell.row}_${cell.col}`}\r\n                  row={cell.row}\r\n                  col={cell.col}\r\n                  area={cellArea}\r\n                  isFood={cell.row === food.row && cell.col === food.col}\r\n                  snake={snake.find(tail => cell.row === tail.row && cell.col === tail.col)}\r\n                  snakeHead={snake[0].row === cell.row && snake[0].col === cell.col}\r\n              />\r\n          ))\r\n        }\r\n      </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Field;","import React from \"react\";\nimport './App.scss';\nimport Field from \"./Components/Field\";\n\nconst FIELD_WIDTH = 700;\nconst FIELD_HEIGHT = 700;\nconst CELL_AREA  = 35;\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n        <Field width={FIELD_WIDTH} height={FIELD_HEIGHT} cellArea={CELL_AREA}/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}